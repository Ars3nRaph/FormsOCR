*{box-sizing:border-box}html,body{height:100%}
:root{
  --bg: #0a0f1a;
  --bg-elev: #0d1524;
  --glass: rgba(13,21,36,0.6);
  --glass-br: rgba(255,255,255,0.08);
  --border: #1d2740;
  --text: #e6eef8;
  --muted: #9fb3c8;
  --primary: #6ea8ff;
  --primary-2: #4177ff;
  --success: #4ade80;
  --danger: #ef4444;
  --warning: #f59e0b;
  --shadow: 0 10px 30px rgba(0,0,0,.35);
  --gradient: radial-gradient(1200px 800px at 80% -50%, rgba(49,82,255,0.25), transparent 60%),
              radial-gradient(1200px 800px at -20% 120%, rgba(16,185,129,0.18), transparent 60%);
}
@media (prefers-color-scheme: dark){:root{color-scheme: dark}}
body{
  margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  background: var(--bg); color: var(--text);
  background-image: var(--gradient);
}
.app{display:flex;min-height:100vh;gap:18px;padding:18px}
.card{border:1px solid var(--border);border-radius:18px;box-shadow:var(--shadow);}
.glass{background:var(--glass);backdrop-filter: blur(10px);border-color: var(--glass-br)}
.sidebar{width:320px;display:flex;flex-direction:column;padding:16px;gap:14px}
.title{margin:0 0 6px}
.input{padding:12px 12px;border-radius:12px;border:1px solid var(--border);background:rgba(8,13,24,.7);color:var(--text);outline:none}
.input:focus{border-color:#2a3d75;box-shadow:0 0 0 4px rgba(65,119,255,.15)}
.btn{padding:10px 14px;border-radius:12px;border:1px solid var(--border);background:#101a2d;color:var(--text);cursor:pointer;transition:transform .06s ease, box-shadow .2s ease,border .2s ease}
.btn:hover{transform:translateY(-1px);box-shadow:0 8px 20px rgba(0,0,0,.25)}
.btn:active{transform:translateY(0)}
.btn:disabled{opacity:.5;cursor:not-allowed}
.btn-primary{background:linear-gradient(180deg, var(--primary), var(--primary-2));border:none;color:#fff}
.btn-success{background: linear-gradient(180deg, #34d399, #059669);border:none;color:#07130e}
.btn-danger{background: linear-gradient(180deg, #ef4444, #b91c1c);border:none;color:#fff}
.btn-ghost{background: transparent}
.file{position:relative;display:inline-flex;align-items:center;gap:8px}
.file input{display:none}
.file span{padding:10px 12px;border-radius:12px;border:1px dashed var(--border);background:rgba(16,26,45,.6)}
.main{flex:1;display:flex;flex-direction:column;gap:18px}
.topbar{display:flex;align-items:center;gap:12px;padding:12px 16px;border-radius:18px}
.crumbs{opacity:.9}
.pane{padding:16px;display:flex;flex-direction:column;gap:10px}
.pane-head{display:flex;align-items:center;justify-content:space-between}
.pane-tools{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
.editor{display:grid;grid-template-columns:1fr;gap:10px}
.canvasWrap{overflow:auto;border:1px dashed var(--border);border-radius:16px;max-height:64vh;background:rgba(5,10,20,.7)}
#canvas{display:block;max-width:100%}
.roi-list{display:flex;flex-wrap:wrap;gap:8px}
.roi-pill{padding:6px 10px;border-radius:999px;background:rgba(16,26,45,.75);border:1px solid var(--border);cursor:pointer;transition:all .15s ease}
.roi-pill:hover{border-color:#3356b5;box-shadow:0 4px 14px rgba(65,119,255,.2)}
.roi-pill.active{outline:2px solid #60a5fa; background: rgba(96,165,250,.15)}
.roi-actions-bot{display:flex;justify-content:flex-end}
.proj-list{flex:1;overflow:auto;border:1px dashed var(--border);border-radius:14px;padding:6px}
.proj-list ul{list-style:none;margin:0;padding:0}
.proj-list li{padding:10px 12px;border-radius:10px;cursor:pointer;transition:background .15s}
.proj-list li:hover{background:rgba(255,255,255,.04)}
.proj-list li.active{background:rgba(96,165,250,.12);border:1px solid #3356b5}
.proj-actions{display:flex;gap:10px}
.proj-footer{display:flex;gap:10px;justify-content:space-between}
.muted{opacity:.85;color:var(--muted);white-space:pre-wrap}
.table-card{padding:8px}
table{border-collapse:collapse;width:100%;margin-top:8px;overflow:hidden;border-radius:12px}
th,td{border:1px solid var(--border);padding:10px 12px;text-align:left}
thead th{background:linear-gradient(180deg, rgba(49,82,255,.25), rgba(49,82,255,.08));color:#dbe6ff}
tbody tr:hover{background:rgba(255,255,255,.03)}
.toast{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:#0f172a;border:1px solid var(--border);padding:10px 14px;border-radius:12px;opacity:0;transition:opacity .2s ease;pointer-events:none;z-index:9999;box-shadow:var(--shadow)}
.toast.show{opacity:1}
.loader{position:fixed;inset:0;background:rgba(3,8,20,.55);display:flex;align-items:center;justify-content:center;gap:12px;z-index:9999}
.loader.hidden{display:none}
.spinner{width:34px;height:34px;border-radius:50%;border:4px solid rgba(255,255,255,.2);border-top-color:#fff;animation:spin 1s linear infinite}
.loader-text{color:#fff;font-weight:700;letter-spacing:.3px}
@keyframes spin{to{transform:rotate(360deg)}}
.eng-badge{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;border:1px solid var(--border);background:rgba(16,26,45,.6);font-size:12px;color:#d1e0ff}
.eng-badge .dot{width:8px;height:8px;border-radius:999px;background:#9ca3af;box-shadow:0 0 0 3px rgba(156,163,175,.15)}
.tip:hover{box-shadow:0 8px 24px rgba(65,119,255,.18)}
